# 鸿蒙Demo开源介绍文档

## 产品概述
- SDK 名称：智能美化特效SDK（鸿蒙端）
- SDK 开发者：北京火山引擎科技有限公司
- SDK主要功能：通过计算机视觉算法对采集到的图像或视频流进行处理，实现计算机视觉基础检测识别、贴纸特效、美化滤镜、人像智能等功能，适用于拍照工具、直播、短视频、在线教育、体感游戏等各类场景。
- SDK版本信息： 
  
| 平台 | 发布版本 | 发布日期 |
| --- | --- | --- |
| 鸿蒙端（HarmonyOS） | V0.0.1 | 2024.10 |
| 鸿蒙端（HarmonyOS） | V0.0.2 | 2025.01 |

[通用版本变更说明](https://bytedance.larkoffice.com/docx/JUK7ds2uJobHPSxnxbTcFkFLn5e?)  

SDK获取请联系技术支持获得。

- SDK 隐私政策：[智能美化特效 SDK 隐私政策](https://www.volcengine.com/docs/6705/124307)
- 开发者使用合规规范：[智能美化特效 SDK 开发者使用合规规范](https://www.volcengine.com/docs/6705/1162076)

智能美化特效SDK是基于计算机视觉智能算法、超大规模的人脸检测和识别技术的特效库。可为创作者提供适用于多端（iOS/Android/HarmonyOS/Windows/macOS/Linux）的自动图像美化、人脸美颜、特效加工等辅助编辑功能。智能美化特效SDK 已稳定运行于抖音、火山、轻颜、Faceu 等产品上，具备性能稳定、速度快、功耗低等特性。

## 更新日志

### 鸿蒙端（HarmonyOS）V0.0.2
主要更新点如下：
- 新增支持小项：
  - 美颜美型-锐化
- Demo 新增展示小项：
  - 美颜美型-微整形（面部、眼睛、鼻子、嘴巴）
  - 美颜美型-美妆（口红、腮红、修容、眉毛、眼影、美瞳、染发）
  - 美颜美型-滤镜
  - 美颜美型-画质
- Demo UI对齐移动端，支持实时预览和选择图片/视频处理  

### 鸿蒙端（HarmonyOS）V0.0.1
主要更新点如下：
- 支持美颜美型-磨皮、美白、清晰，暂不支持锐化、美白小项白皙和粉白
- 支持美颜美型-微整形、美体、美妆、滤镜、画质，暂不支持黑科技
- 支持26款风格妆
- 支持14款贴纸

## Demo 概述

### 如何获取
请客户加入测试组，加入后可以下载demo进行体验
https://appgallery.huawei.com/link/invite-test-wap?taskId=2295691eaeec1e9ffd9abbb39b178cac&invitationCode=1to9svMHTv2

### 交互说明

- 主页  

    主页提供模块选单：美颜美型、风格妆、贴纸。
    点击模块，即可进入该功能。

<div style="text-align: center;">
  <img src="intros/首页.jpeg" style="height: 500px; display: block; margin: 0 auto;" alt="">
</div>

- 功能模块  
  
    进入功能模块后，可以使用对应的功能。  

  - 通常情况下，默认为相机预览模式，可以通过上传图片/视频来体验成片处理；  
  - 使用功能目录和功能项的
  - 使用对比原图功能来快速切换原图和美化效果

<div style="text-align: center;">
  <img src="intros/拍摄页.jpeg" style="height: 500px; display: block; margin: 0 auto;" alt="">
</div>


### 运行条件  

1. 鸿蒙设备操作系统为 Harmony NEXT 5.0+ 版本，开发 API Version >= 12  
2. 运行设备内存1GB及以上
3. 开发IDE为DevEco Studio 5.0+

### 运行说明
1. 本地环境配置：DevEco Studio 最新版（测试所在IDE环境为5.0.0.61，API Version 12）  
2. 工程内进行 sync 后 build 运行
3. cvsdk 需要鉴权使用，会验证 bundleName 是否和 license 中的匹配，请保证包名和证书的一致性。授权同样会对时间进行验证，请保证运行时间在证书有效期内，授权时间可参考 rawfile/LicenseBag.bundle/labcv_test_xxx.licbag 文件名
4. 接口说明可参考 [AI 开放平台 - CV SDK文档](https://cv-api.bytedance.com/doc/openapi/2036/99793)


## 功能说明

### 美颜美型
#### 磨皮
以自然细腻的肌肤处理为目标，帮助用户在保留肌肤质感的前提下，实现平滑的面部效果。通过去除瑕疵、均匀肤色等技术，使肌肤看起来更加细腻光滑，同时保持真实自然的质感，不会出现过度平滑的塑料感。
具体效果包括：
- 去除瑕疵：对皮肤上的小瑕疵，如痘印、暗斑等进行微调，使肌肤看上去更加干净、无瑕，提升整体精致度；
- 保留肤质：在消除皮肤瑕疵的同时，保留肌肤的自然纹理，让皮肤看起来富有生气，避免磨皮过度带来的不自然感；
- 均匀肤色：通过微调肤色分布，使脸部颜色更加均匀，呈现健康光泽，提升整体气质  

这一效果适合追求自然美肌效果的用户，通过细致的磨皮处理，实现健康、自然的肌肤质感，不仅能用于日常自拍，还适用于职业肖像、证件照等需要自然美感的场合。

<div style="text-align: center;">
  <img src="intros/磨皮.png" style="height: 300px; display: block; margin: 0 auto;" alt="">
</div>

#### 美白
基于精准的人脸关键点定位技术，这套美白效果方案支持不同风格的美白调整，提供自然、真实的美颜效果，适应多样化的用户需求。
具体美白效果包括：
1. 自然（暖白）：呈现轻微暖白的效果，增强肤色的健康感，适合追求柔和温暖肤色的用户，能在保持自然的同时带来淡雅的美白效果；
2. 白皙（冷白）：适用于喜欢冷白肤色的用户，强调清新干净的肌肤质感，提升面部的光洁度与通透感，使整体形象更为高级；
3. 粉白：带有淡淡的粉白效果，适合喜欢柔美风格的用户，增加面部红润感，突出肌肤的细腻和柔和，为整体形象增添几分温婉气质  

无论是日常自拍还是专业摄影，该方案均可通过调整参数强度，实现最佳的美白效果，同时确保在各种光照场景下依然保持高还原度和自然感。

<div style="text-align: center;">
  <img src="intros/美白.png" style="height: 200px; display: block; margin: 0 auto;" alt="">
</div>

#### 锐化&清晰
锐化功能主要增强图像的边缘和细节，而清晰功能则关注图像的整体清晰度，通过改善对比度和去除模糊提升图像质量。二者可以结合使用，以在图像中实现更好的效果。


#### 微整形
基于精准的人脸关键点定位技术和2D图像处理能力，微整形功能支持灵活的面部调整，实现自然、细腻的美型效果。提供面部、眼睛、鼻子、眉毛和嘴巴的多种调节功能，可满足不同用户的个性化需求。此功能适用于实时拍摄、直播、图像/视频编辑、视频会议、VR等场景，能够提升用户的整体视觉效果。
- 面部功能
1. 瘦脸（默认、男神、女神、自然脸）：调节脸型，使面部更立体；
2. 小脸：缩小整体脸部比例，营造小巧效果；
3. 窄脸：收窄脸部宽度，调整脸部轮廓；
4. 小头：缩小头部大小，提升人像的协调美观；
5. 瘦颧骨：减少或突出颧骨宽度，柔化脸部轮廓；
6. 瘦下颌骨：调整下颌骨线条，减少棱角感；
7. 下巴（双向）：调整下巴的长短和宽度，使面部更均衡；
8. 发际线（双向）：调整发际线高度，使面部比例更协调；
9. 法令纹：淡化法令纹，增强面部年轻感

- 眼睛功能
1. 大小：增大或缩小眼睛，使面部更具神采；
2. 位置：微调眼睛整体位置，提升五官协调感；
3. 眼距：调节眼间距，使五官比例更和谐；
4. 眼尾上扬：微调眼尾角度，增添面部气质；
5. 亮眼：增加眼部亮度，使眼睛更明亮；
6. 黑眼圈：淡化黑眼圈，提升清新感；
7. 双眼皮：调整眼皮结构，增强眼部立体感；

- 鼻子功能
1. 鼻翼（双向）：调节鼻翼宽度，使鼻部更精致；
2. 提升（双向）：微调鼻子形态，增加面部和谐度

- 嘴巴功能
1. 大小（双向）：调节嘴巴比例，使五官比例更和谐；
2. 位置：微调嘴巴位置，提升面部协调性；
3. 微笑：增加微笑弧度，提升面部亲和力；
4. 白牙：增亮牙齿色泽，增强笑容吸引力

### 美妆  

美妆基于人脸280关键点算法，确保妆容纹理精准贴合用户面部，可随表情和动作实时变化，呈现自然、逼真的妆容效果。特效强度可调，灵活适应不同妆容需求，打造出多样化的妆感风格。此功能适用于视频直播、美颜相机和互动娱乐等场景。
- 口红  
  
    提供丰富的色号，打造多层次唇妆效果。  

  - 珊瑚色、西柚色、豆沙粉、元气橘、少女粉、复古红、脏橘色、西瓜红、丝绒红、梅子色

<div style="text-align: center;">
  <img src="intros/美妆小项.png" style="height; display: block; margin: 0 auto;" alt="">
</div>

- 腮红  

    支持颜色和样式的多种组合，满足用户不同场合和风格的腮红需求。
  1. 日常：轻微的粉色腮红效果，增添健康气色，同时保持自然感，适合日常妆容使用；
  2. 甜橙：增加带有橙色调的腮红，活力十足，为面部增添青春气息，适合元气满满的日常风格；
  3. 蜜桃：蜜桃色腮红柔和且清新，增加少女感，适合喜欢甜美妆容的用户；
  4. 心机：带有层次感的粉色腮红，使面部更具立体感，适合日常中想增添精致感的用户


<div style="text-align: center;">
  <img src="intros/腮红.png" style="height: ; display: block; margin: 0 auto;" alt="">
</div>  


- 修容  

精致修容效果，提升脸部轮廓感和立体感。


- 眉毛  
  
    多种眉毛颜色和造型搭配，满足不同妆容需求，从清新自然到精致妆感。
  - 棕色、粗黑、黑色、细黑


- 眼影  
  
    7种风格，从自然到浓艳的色彩选择，为眼部提供丰富层次，搭配多种睫毛和眼线效果。
  -  效果：晚霞红、少女粉、气质粉、梅子红、焦糖棕、元气橘、奶茶色

- 美瞳  
  
    多种颜色可选，增添眼神的深邃感和灵动性。
  - 颜色：混血棕、可可棕、蜜桃粉、水光黑、星空蓝、初见灰


- 染发  
  
    高阶染发效果，通过智能渲染实现发丝的光泽度和色彩层次。
  - 颜色：暗蓝、墨绿、深棕

    效果举例：
    1. 暗蓝：在头发上增加了深邃的蓝色调，呈现出冷色系的个性化风格，适合想要突出冷艳气质的用户；
    2. 墨绿：采用低调的深绿色染发效果，使整体形象更显神秘且自然，适合偏爱沉稳风格的用户；
    3. 深棕：添加了温暖的深棕色调，使头发更具光泽感和层次感，适合想要自然变化的用户，适配日常和职业场景

<div style="text-align: center;">
  <img src="intros/染发.png" style="height; display: block; margin: 0 auto;" alt="">
</div>

### 滤镜
滤镜功能提供多达64款滤镜效果，适用于人像、美食、风景、复古及风格化等多种场景。借助GPU上的实时渲染技术，实现毫秒级响应，确保在动态场景中保持高效流畅的体验。用户可根据需求自定义滤镜程度，轻松调整出符合个性风格的效果。
-  人像 - 自然
提供柔和自然的滤镜效果，突出面部肌肤细腻质感，适合日常自拍和人物特写。
  - 效果：自然、初见、透亮、soft、柔白、清透、亮橘、恋爱超甜、冷白皮
- 人像 - 质感
强调面部的细腻质感，提供深度和立体感，使人物更具吸引力。
  - 效果：深褐、浅暖、奶茶、冷氧、胡桃木、红棕、海滨人像、高级灰、德古拉、暗调
- 人像 - 强氛围
营造强烈的氛围效果，为人像增添情绪张力，适合打造具有艺术感的照片。
  - 效果：椰林、氧气、物语、奶油、马卡龙、洛丽塔、栗色、桔梗
- 复古
模拟经典的复古色调，营造出怀旧氛围，适合艺术摄影或复古风格的主题。
  - 效果：日杂、暖黄、美式胶片、旅途、蓝调胶片、红色复古、FJ、EK、CT
-  食物
  通过提升食物的色彩和对比度，使食物看起来更加诱人和美味，适合美食拍摄。
  -  效果：苏打、炭烧、食色、气泡水、暖食、料理、川味
- 风景
强调自然光和色彩饱和度，为风景照片增添明亮、清晰的效果，适合自然景观和户外拍摄。
  - 效果：樱花、夜色、夕阳、晚樱、青橙、浅夏、蜜桃、绿妍、京都、加州、海岛
- 风格化
增加特殊的风格化效果，适合有艺术感和个性化的拍摄需求，适合创意自拍和个性化图片编辑。
  - 效果：褪色、橘蓝调、红唇、黑金、黑白、赫本

<div style="text-align: center;">
  <img src="intros/滤镜.png" style="height; display: block; margin: 0 auto;" alt="">
</div>

### 画质
调整画面的基础参数和特色效果，以实现整体图像的优化和风格化。可以和其他美颜美型效果叠加使用。
- 色温
用于调整图像的整体色调，使其更冷（偏蓝）或更暖（偏黄）；
- 色调
用于改变图片整体的颜色基调，对颜色的色相进行调整；
- 饱和度
用于调整图片颜色的纯度或强度，通过调节饱和度，可以让图像的颜色看起来更加鲜艳或更加柔和（甚至灰度化）；
- 亮度
用于控制图像整体的明暗程度。通过调节亮度，可以使图像看起来更明亮或更暗；
- 对比度
用于调整图像中亮部和暗部的差异程度。通过调节对比度，可以让图像看起来更鲜明或更柔和；
- 高亮
用于专门调整图像中亮部区域（即高亮部分）的亮度和细节表现。通过调节高亮，可以恢复过曝区域的细节或增强高光效果；
- 阴影
用于专门调整图像中暗部区域（即阴影部分）的亮度和细节表现。通过调节阴影，可以恢复暗部区域的细节或增强阴影效果；
- 光感
用于调整图像中光线的表现效果，提升画面的立体感、层次感和光影关系；
- 颗粒
用于通过调整图像的颗粒感来改变画面的质感或氛围，可以增加颗粒以模拟胶片风格的粗糙感；
- 褪色
用于减弱图像的颜色和明暗对比，使亮部和暗部的差异变小，同时颜色趋于柔和或灰调；
- 暗角
用于控制图像四周区域（尤其是角落部分）的亮度，使其变暗或变亮。通过暗角调节，可以增强画面的视觉集中性，营造特定的氛围感。


## 贴纸
提供2D、复杂、3D风格等多种类型的贴纸，适用于多样化的应用场景和个性化需求。基于先进的人脸关键点检测技术，贴纸可以精准贴合用户面部，实时跟踪并保持自然的贴合度。  

请注意，在demo中演示了贴纸从云端下发的逻辑，开发者可选择适合自己应用的贴纸下发方式。
- 特效触发方式
  - 面部动作触发：识别特定一种或多种面部动作后，可自动展现贴纸效果。 可识别面部动作类型：眨眼、张嘴、摇头、点头、挑眉、嘟嘴 
  - 手势识别触发：识别特定一种或多种手势后，可自动展现贴纸效果。可识别手势类型：34 种手势，如比心、胜利、握拳等
  - 点击屏幕触发：点击屏幕即可展现或切换贴效果

## 风格妆
风格妆为整体上妆，一键呈现完整妆容效果，比逐一选择单点美妆更加便捷。精选多种妆容素材，满足用户从清新自然到精致华丽的不同需求，可盐可甜。可调节滤镜和美妆强度，以获得最佳的视觉效果。
-  自然  
  
    提供多种日常自然妆容效果，适合追求简约自然的用户。
   - 效果：自然、白茶、甜美、白皙、水雾、奶茶、优雅、蜜桃粉、奶凶、气质、温暖、元气、没有小熊、冰川蓝瞳
- 风格  
  
    包含多种个性化妆容，适合表现不同风格的妆效，如欧美、甜系等。
  - 效果：C位、爱豆、欧美、粉夏、黑丝绒、ins风、女神、甜丧
- 男生  
  
    专为男性设计的妆容风格，增加面部轮廓的立体感，适合男主播或喜欢自然清新的男生用户。
  - 效果：暖男、深邃、质感、断眉

<div style="text-align: center;">
  <img src="intros/风格妆.png" style="height; display: block; margin: 0 auto;" alt="">
</div>